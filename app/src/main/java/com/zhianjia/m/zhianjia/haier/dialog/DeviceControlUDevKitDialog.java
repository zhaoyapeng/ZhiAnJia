package com.zhianjia.m.zhianjia.haier.dialog;import android.app.Dialog;import android.content.Context;import android.text.TextUtils;import android.widget.CompoundButton;import android.widget.CompoundButton.OnCheckedChangeListener;import android.widget.Switch;import android.widget.TextView;import com.haier.uhome.usdk.api.interfaces.IuSDKCallback;import com.haier.uhome.usdk.api.uSDKDevice;import com.haier.uhome.usdk.api.uSDKDeviceAttribute;import com.haier.uhome.usdk.api.uSDKDeviceStatusConst;import com.haier.uhome.usdk.api.uSDKErrorConst;import com.zhianjia.m.zhianjia.R;import com.zhianjia.m.zhianjia.haier.util.Util;import java.util.List;/** * 演示控制U+控制開發板 * Control U+ Dev Kit Board * 110c10841050850814ee00000000000000000000000000000000000000000000 */public class DeviceControlUDevKitDialog extends Dialog {	private TextView uDevKitBoardOnOffTextView = null;	private TextView uDevKitBoardTempTextView = null;		private Switch uDevKitBoardOnOffSwitch = null;	private uSDKDevice selecteduSDKDevice;	public DeviceControlUDevKitDialog(Context context) {		super(context, R.style.notitle_dialog);		this.setContentView(R.layout.devicecontrol_udevkitboard_layout);		this.initUI();		this.initUIEvent();	}		public void setSelecteduSDKDevice(uSDKDevice selecteduSDKDevice) {		this.selecteduSDKDevice = selecteduSDKDevice;	}	public void setOnCancelListener(			android.view.View.OnClickListener listener) {		//button.setOnClickListener(listener);	}		/**	 * SmartDevice Status:STATUS_CONNECTED || STATUS_READY	 * 更新U+開發板屬性狀態	 */	public void updateSmartDeviceStatus(            List<uSDKDeviceAttribute> propertiesChanged, uSDKDevice myDevice) {		uSDKDeviceStatusConst myDeviceStatus = myDevice.getStatus();		String typeId = myDevice.getUplusId();				if((myDeviceStatus == uSDKDeviceStatusConst.STATUS_CONNECTED ||		   myDeviceStatus == uSDKDeviceStatusConst.STATUS_READY)) {						uSDKDeviceAttribute smartDeviceAttrOn  =					Util.queryCode6ValueByKey("214001", myDevice);			uSDKDeviceAttribute smartDeviceAttrOff  =					Util.queryCode6ValueByKey("214002", myDevice);						uSDKDeviceAttribute smartDeviceAttrTemp  =					Util.queryCode6ValueByKey("614001", myDevice);						String onValue = smartDeviceAttrOn.getAttrValue();			String offValue = smartDeviceAttrOff.getAttrValue();			if(TextUtils.isEmpty(onValue) != true) {				uDevKitBoardOnOffTextView.setText(onValue);							} else if(TextUtils.isEmpty(offValue) != true) {				uDevKitBoardOnOffTextView.setText(offValue);							}						String temp = smartDeviceAttrTemp.getAttrValue();			uDevKitBoardTempTextView.setText(temp);		}			}	private void initUI() {		uDevKitBoardOnOffTextView = (TextView)				this.findViewById(R.id.code_udevkitboard_onoff_tv);				uDevKitBoardTempTextView = (TextView)				this.findViewById(R.id.code_udevkitboard_temp);				uDevKitBoardOnOffSwitch = (Switch)				this.findViewById(R.id.udevkitboard_onoff_switch);	}		/**	 * reference uplusId/typeId DOC to write command	 * 參考ID開發文檔編寫指令和查詢報警	 */	private void initUIEvent() {		uDevKitBoardOnOffSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener() {						@Override			public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {				if(isChecked) {					selecteduSDKDevice.writeAttribute("214001", "214001", new IuSDKCallback() {												@Override						public void onCallback(uSDKErrorConst result) {							if(result == uSDKErrorConst.RET_USDK_OK) {								System.out.println("command succeed！");							}												}					}); 														} else {					selecteduSDKDevice.writeAttribute("214002", "214002", new IuSDKCallback() {												@Override						public void onCallback(uSDKErrorConst result) {							System.out.println("cmd result:" + result);													}					});									}							}					});	}	}